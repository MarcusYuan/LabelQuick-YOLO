2025-03-16 04:15:04,025 - root - INFO - LabelQuick 应用程序启动
2025-03-16 04:15:04,256 - hydra.core.utils - DEBUG - Setting JobRuntime:name=UNKNOWN_NAME
2025-03-16 04:15:04,256 - hydra.core.utils - DEBUG - Setting JobRuntime:name=app
2025-03-16 04:15:08,275 - root - INFO - 初始化主界面
2025-03-16 04:15:09,244 - root - DEBUG - UI 设置完成
2025-03-16 04:15:09,244 - root - DEBUG - 初始化变量完成
2025-03-16 04:15:11,566 - root - INFO - Loaded checkpoint sucessfully
2025-03-16 04:15:13,785 - root - INFO - Loaded checkpoint sucessfully
2025-03-16 04:15:13,797 - root - DEBUG - 初始化 Anything_TW 和 AnythingVideo_TW 完成
2025-03-16 04:15:13,797 - root - DEBUG - 初始化定时器完成
2025-03-16 04:15:13,798 - root - DEBUG - 开始连接信号和槽
2025-03-16 04:15:13,798 - root - DEBUG - 信号和槽连接完成
2025-03-16 04:15:13,798 - root - DEBUG - 初始化标签格式: xml
2025-03-16 04:15:13,798 - root - INFO - 主界面初始化完成
2025-03-16 04:15:29,040 - root - INFO - 选择视频: D:/workspace/LabelQuick/video/ceshi.mp4, 输出目录: D:/workspace/LabelQuick/video
2025-03-16 04:15:29,042 - root - INFO - 创建YOLO训练目录结构: D:/workspace/LabelQuick/video\images, D:/workspace/LabelQuick/video\labels
2025-03-16 04:15:29,043 - root - INFO - 输出目录中已有 1 个图像文件，将使用现有图像
2025-03-16 04:15:29,043 - root - INFO - 初始化 AVT 对象
2025-03-16 04:15:31,399 - root - INFO - Loaded checkpoint sucessfully
2025-03-16 04:15:31,417 - root - DEBUG - AVT 对象初始化完成
2025-03-16 04:15:31,417 - root - DEBUG - 设置 AVT 的视频目录: D:/workspace/LabelQuick/video
2025-03-16 04:15:31,418 - sampro.LabelVideo_TW - DEBUG - 找到 1 个帧文件
2025-03-16 04:15:31,418 - sampro.LabelVideo_TW - DEBUG - 使用数字提取排序成功
2025-03-16 04:15:31,418 - sampro.LabelVideo_TW - DEBUG - 排序后的前5个文件: ['0.jpg']
2025-03-16 04:15:31,461 - root - DEBUG - AVT 视频目录设置成功
2025-03-16 04:15:31,461 - root - DEBUG - 找到 1 个视频帧
2025-03-16 04:15:31,461 - root - DEBUG - 初始化 AVT 的推理状态: D:/workspace/LabelQuick/video
2025-03-16 04:15:39,063 - root - DEBUG - AVT 推理状态初始化成功
2025-03-16 04:15:39,064 - root - DEBUG - 设置图像路径: D:/workspace/LabelQuick/video\0.jpg
2025-03-16 04:15:39,064 - root - DEBUG - 图像名称: 0
2025-03-16 04:15:39,077 - root - DEBUG - 调整图像大小: D:/workspace/LabelQuick/video\0.jpg, 1300x736
2025-03-16 04:15:39,096 - root - INFO - For numpy array image, we assume (HxWxC) format
2025-03-16 04:15:39,230 - root - INFO - Computing image embeddings for the provided image...
2025-03-16 04:15:46,842 - root - INFO - Image embeddings computed.
2025-03-16 04:15:46,845 - root - DEBUG - 设置 AT 的图像
2025-03-16 04:15:46,855 - root - DEBUG - 显示图像完成
2025-03-16 04:15:46,855 - root - DEBUG - 启用开始检测打标按钮
2025-03-16 04:15:46,855 - root - DEBUG - 设置鼠标点击事件
2025-03-16 04:15:51,046 - root - INFO - 鼠标点击事件: 坐标=(564, 175)
2025-03-16 04:15:51,046 - root - DEBUG - 设置点击坐标: (564, 175), 方法: 1
2025-03-16 04:15:51,046 - root - DEBUG - 设置 AVT 的点击坐标: (564, 175), 方法: 1
2025-03-16 04:15:51,047 - root - DEBUG - 调用 AVT.Create_Mask
2025-03-16 04:15:51,047 - sampro.LabelVideo_TW - INFO - 创建掩码
2025-03-16 04:15:51,047 - sampro.LabelVideo_TW - DEBUG - 添加新点: 坐标=(564, 175), 方法=1
2025-03-16 04:15:51,049 - sampro.LabelVideo_TW - DEBUG - 点集: [[564 175]], 标签: [1]
2025-03-16 04:15:51,284 - sampro.LabelVideo_TW - DEBUG - 生成的掩码形状: torch.Size([1, 1, 736, 1300])
2025-03-16 04:15:51,285 - sampro.LabelVideo_TW - DEBUG - 掩码形状: (1, 736, 1300)
2025-03-16 04:15:51,285 - sampro.LabelVideo_TW - DEBUG - 帧尺寸: 1300x736
2025-03-16 04:15:51,287 - sampro.LabelVideo_TW - WARNING - 掩码尺寸 (736x1) 与帧尺寸 (1300x736) 不匹配，进行调整
2025-03-16 04:15:51,289 - sampro.LabelVideo_TW - INFO - 绘制掩码，对象 ID: None
2025-03-16 04:15:51,290 - sampro.LabelVideo_TW - DEBUG - 帧尺寸: 1300x736
2025-03-16 04:15:51,290 - sampro.LabelVideo_TW - DEBUG - 原始掩码尺寸: 1300x736
2025-03-16 04:15:51,301 - sampro.LabelVideo_TW - DEBUG - 创建彩色掩码完成
2025-03-16 04:15:51,304 - sampro.LabelVideo_TW - DEBUG - 叠加掩码到原始帧完成
2025-03-16 04:15:51,312 - sampro.LabelVideo_TW - DEBUG - 找到 1 个轮廓
2025-03-16 04:15:51,313 - sampro.LabelVideo_TW - DEBUG - 轮廓 1 面积: 288.0
2025-03-16 04:15:51,313 - sampro.LabelVideo_TW - DEBUG - 更新最大轮廓: 索引=1, 面积=288.0
2025-03-16 04:15:51,314 - sampro.LabelVideo_TW - DEBUG - 最大轮廓边界框: x=561, y=175, w=18, h=24
2025-03-16 04:15:51,315 - sampro.LabelVideo_TW - DEBUG - 绘制边界框和轮廓完成
2025-03-16 04:15:51,315 - sampro.LabelVideo_TW - INFO - 掩码创建成功
2025-03-16 04:15:51,316 - root - DEBUG - AVT.Create_Mask 调用成功
2025-03-16 04:15:51,316 - root - DEBUG - 设置 AT 的点击坐标: (564, 175), 方法: 1
2025-03-16 04:15:51,316 - root - DEBUG - 调用 AT.Create_Mask
2025-03-16 04:15:51,386 - root - DEBUG - 调用 AT.Draw_Mask
2025-03-16 04:15:51,403 - root - DEBUG - 设置点击事件状态: clicked_event=True, paint_event=False
2025-03-16 04:15:53,371 - root - DEBUG - 开始显示已存在的标签和边界框
2025-03-16 04:15:53,382 - root - DEBUG - 没有标签需要显示，显示原始图像
2025-03-16 04:15:55,370 - root - INFO - 鼠标点击事件: 坐标=(569, 177)
2025-03-16 04:15:55,370 - root - DEBUG - 设置点击坐标: (569, 177), 方法: 1
2025-03-16 04:15:55,370 - root - DEBUG - 设置 AVT 的点击坐标: (569, 177), 方法: 1
2025-03-16 04:15:55,370 - root - DEBUG - 调用 AVT.Create_Mask
2025-03-16 04:15:55,370 - sampro.LabelVideo_TW - INFO - 创建掩码
2025-03-16 04:15:55,371 - sampro.LabelVideo_TW - DEBUG - 添加新点: 坐标=(569, 177), 方法=1
2025-03-16 04:15:55,371 - sampro.LabelVideo_TW - DEBUG - 点集: [[564 175]
 [569 177]], 标签: [1 1]
2025-03-16 04:15:55,462 - sampro.LabelVideo_TW - DEBUG - 生成的掩码形状: torch.Size([1, 1, 736, 1300])
2025-03-16 04:15:55,462 - sampro.LabelVideo_TW - DEBUG - 掩码形状: (1, 736, 1300)
2025-03-16 04:15:55,462 - sampro.LabelVideo_TW - DEBUG - 帧尺寸: 1300x736
2025-03-16 04:15:55,464 - sampro.LabelVideo_TW - WARNING - 掩码尺寸 (736x1) 与帧尺寸 (1300x736) 不匹配，进行调整
2025-03-16 04:15:55,465 - sampro.LabelVideo_TW - INFO - 绘制掩码，对象 ID: None
2025-03-16 04:15:55,466 - sampro.LabelVideo_TW - DEBUG - 帧尺寸: 1300x736
2025-03-16 04:15:55,466 - sampro.LabelVideo_TW - DEBUG - 原始掩码尺寸: 1300x736
2025-03-16 04:15:55,471 - sampro.LabelVideo_TW - DEBUG - 创建彩色掩码完成
2025-03-16 04:15:55,472 - sampro.LabelVideo_TW - DEBUG - 叠加掩码到原始帧完成
2025-03-16 04:15:55,473 - sampro.LabelVideo_TW - DEBUG - 找到 1 个轮廓
2025-03-16 04:15:55,473 - sampro.LabelVideo_TW - DEBUG - 轮廓 1 面积: 330.5
2025-03-16 04:15:55,474 - sampro.LabelVideo_TW - DEBUG - 更新最大轮廓: 索引=1, 面积=330.5
2025-03-16 04:15:55,474 - sampro.LabelVideo_TW - DEBUG - 最大轮廓边界框: x=561, y=173, w=19, h=26
2025-03-16 04:15:55,474 - sampro.LabelVideo_TW - DEBUG - 绘制边界框和轮廓完成
2025-03-16 04:15:55,475 - sampro.LabelVideo_TW - INFO - 掩码创建成功
2025-03-16 04:15:55,475 - root - DEBUG - AVT.Create_Mask 调用成功
2025-03-16 04:15:55,475 - root - DEBUG - 设置 AT 的点击坐标: (569, 177), 方法: 1
2025-03-16 04:15:55,475 - root - DEBUG - 调用 AT.Create_Mask
2025-03-16 04:15:55,541 - root - DEBUG - 调用 AT.Draw_Mask
2025-03-16 04:15:55,548 - root - DEBUG - 设置点击事件状态: clicked_event=True, paint_event=False
2025-03-16 04:15:59,217 - root - INFO - 视频对话框确认，标签文本: 篮球
2025-03-16 04:15:59,217 - root - DEBUG - 添加标签到列表: 篮球
2025-03-16 04:15:59,218 - root - DEBUG - 初始化 list_labels 列表
2025-03-16 04:15:59,218 - root - DEBUG - 确保YOLO目录结构存在: D:/workspace/LabelQuick/video\images\train, D:/workspace/LabelQuick/video\labels\train
2025-03-16 04:15:59,218 - root - DEBUG - 使用 XML 格式保存标签: 篮球
2025-03-16 04:15:59,219 - root - DEBUG - 边界框坐标: x=560, y=177, w=20, h=22
2025-03-16 04:15:59,219 - root - DEBUG - 保存 XML 标签到: D:/workspace/LabelQuick/video\0.xml, 大小: [1300, 736, 3]
2025-03-16 04:15:59,221 - root - INFO - XML 标签已保存: D:/workspace/LabelQuick/video\0.xml
2025-03-16 04:15:59,221 - root - DEBUG - 启用开始检测打标按钮
2025-03-16 04:15:59,221 - root - DEBUG - 重置点击和绘制事件状态
2025-03-16 04:15:59,221 - root - DEBUG - 开始显示已存在的标签和边界框
2025-03-16 04:15:59,231 - root - DEBUG - 显示 1 个点击标签和 0 个绘制标签
2025-03-16 04:15:59,231 - root - DEBUG - 绘制点击标签 1: (560, 177) - (580, 199)
2025-03-16 04:15:59,233 - root - DEBUG - 标签显示完成
2025-03-16 04:15:59,233 - root - DEBUG - 显示已存在的标签
2025-03-16 04:16:02,253 - root - INFO - 开始视频检测打标
2025-03-16 04:16:02,254 - root - DEBUG - 禁用开始检测打标按钮
2025-03-16 04:16:02,254 - root - DEBUG - 视频路径: D:/workspace/LabelQuick/video/ceshi.mp4, 输出目录: D:/workspace/LabelQuick/video
2025-03-16 04:16:02,254 - root - DEBUG - 设置 AVT 的点击坐标: (569, 177), 方法: 1
2025-03-16 04:16:02,254 - root - DEBUG - AVT 点击坐标设置成功
2025-03-16 04:16:02,254 - root - DEBUG - 添加点击点到模型
2025-03-16 04:16:02,254 - sampro.LabelVideo_TW - DEBUG - 添加新点: 坐标=(569, 177), 方法=1
2025-03-16 04:16:02,255 - sampro.LabelVideo_TW - DEBUG - 点集: [[564 175]
 [569 177]
 [569 177]], 标签: [1 1 1]
2025-03-16 04:16:02,358 - sampro.LabelVideo_TW - DEBUG - 生成的掩码形状: torch.Size([1, 1, 736, 1300])
2025-03-16 04:16:02,358 - root - DEBUG - 点击点添加成功
2025-03-16 04:16:02,359 - root - DEBUG - 创建视频处理线程，点击坐标: (569, 177), 方法: 1, 文本: 篮球
2025-03-16 04:16:02,359 - root - DEBUG - 保存路径: D:/workspace/LabelQuick/video, 格式: xml, 类别映射: {}
2025-03-16 04:16:02,359 - root - DEBUG - 将标签 '篮球' 添加到类别映射
2025-03-16 04:16:02,359 - root - DEBUG - 更新后的类别映射: {'篮球': 0}
2025-03-16 04:16:02,360 - root - INFO - 初始化视频处理线程
2025-03-16 04:16:02,361 - root - DEBUG - 视频处理线程初始化完成: 视频路径=D:/workspace/LabelQuick/video/ceshi.mp4, 输出目录=D:/workspace/LabelQuick/video, 格式=xml
2025-03-16 04:16:02,361 - root - DEBUG - 连接视频处理线程信号
2025-03-16 04:16:02,361 - root - INFO - 启动视频处理线程
2025-03-16 04:16:02,362 - root - DEBUG - 禁用其他按钮，防止重复处理
2025-03-16 04:16:02,362 - root - INFO - 开始视频处理: 点击坐标=(569, 177), 方法=1
2025-03-16 04:16:02,363 - root - DEBUG - 创建输出目录: D:/workspace/LabelQuick/video 和 mask 子目录: D:/workspace/LabelQuick/video\mask
2025-03-16 04:16:02,364 - root - DEBUG - 确保YOLO目录结构存在: D:/workspace/LabelQuick/video\images\train, D:/workspace/LabelQuick/video\labels\train
2025-03-16 04:16:02,364 - root - DEBUG - 设置 AVT 的视频目录: D:/workspace/LabelQuick/video
2025-03-16 04:16:02,364 - sampro.LabelVideo_TW - DEBUG - 找到 1 个帧文件
2025-03-16 04:16:02,364 - sampro.LabelVideo_TW - DEBUG - 使用数字提取排序成功
2025-03-16 04:16:02,364 - sampro.LabelVideo_TW - DEBUG - 排序后的前5个文件: ['0.jpg']
2025-03-16 04:16:02,381 - root - INFO - 开始处理视频帧，总帧数: 1
2025-03-16 04:16:02,381 - root - DEBUG - 设置 AVT 的点击坐标: (569, 177), 方法: 1
2025-03-16 04:16:02,381 - root - INFO - 开始自动视频打标
2025-03-16 04:16:02,382 - sampro.LabelVideo_TW - INFO - 开始自动视频打标，格式: xml, 文本: 篮球
2025-03-16 04:16:02,382 - sampro.LabelVideo_TW - INFO - 开始收集视频分割结果
2025-03-16 04:16:02,478 - sampro.LabelVideo_TW - DEBUG - 帧 0 的分割结果: 对象 IDs [1]
2025-03-16 04:16:02,479 - sampro.LabelVideo_TW - INFO - 收集到 1 个帧的分割结果
2025-03-16 04:16:02,479 - sampro.LabelVideo_TW - INFO - 开始处理所有帧并生成标签
2025-03-16 04:16:02,479 - sampro.LabelVideo_TW - INFO - 开始绘制轮廓，格式: xml, 文本: 篮球
2025-03-16 04:16:02,480 - sampro.LabelVideo_TW - DEBUG - 起始帧: 0, 返回帧: False, 保存图像路径: D:/workspace/LabelQuick/video\mask, 保存标签路径: D:/workspace/LabelQuick/video
2025-03-16 04:16:02,480 - sampro.LabelVideo_TW - DEBUG - 开始在视频中传播分割结果
2025-03-16 04:16:02,482 - sampro.LabelVideo_TW - DEBUG - 帧 0 的掩码形状: torch.Size([1, 1, 736, 1300])
2025-03-16 04:16:02,482 - sampro.LabelVideo_TW - DEBUG - 帧 0, 对象 1 的掩码形状: (1, 736, 1300)
2025-03-16 04:16:02,482 - sampro.LabelVideo_TW - DEBUG - 帧 0 的分割结果: 对象 IDs [1]
2025-03-16 04:16:02,483 - sampro.LabelVideo_TW - DEBUG - 找到 1 个帧
2025-03-16 04:16:02,483 - sampro.LabelVideo_TW - INFO - 开始处理 1 个帧
2025-03-16 04:16:02,483 - sampro.LabelVideo_TW - DEBUG - 处理帧 0: D:/workspace/LabelQuick/video\0.jpg
2025-03-16 04:16:02,497 - sampro.LabelVideo_TW - DEBUG - 帧 0 尺寸: 1300x736
2025-03-16 04:16:02,497 - sampro.LabelVideo_TW - DEBUG - 帧 0 有 1 个分割对象
2025-03-16 04:16:02,498 - sampro.LabelVideo_TW - DEBUG - 处理帧 0 的对象 1
2025-03-16 04:16:02,498 - sampro.LabelVideo_TW - DEBUG - 原始掩码尺寸: (1, 736, 1300)
2025-03-16 04:16:02,498 - sampro.LabelVideo_TW - DEBUG - 转换掩码类型从 bool 到 uint8
2025-03-16 04:16:02,500 - sampro.LabelVideo_TW - WARNING - 掩码尺寸 (736x1) 与帧尺寸 (1300x736) 不匹配，进行调整
2025-03-16 04:16:02,500 - sampro.LabelVideo_TW - DEBUG - 调整后的掩码尺寸: (736, 1300)
2025-03-16 04:16:02,501 - sampro.LabelVideo_TW - INFO - 绘制掩码，对象 ID: 1
2025-03-16 04:16:02,501 - sampro.LabelVideo_TW - DEBUG - 帧尺寸: 1300x736
2025-03-16 04:16:02,501 - sampro.LabelVideo_TW - DEBUG - 原始掩码尺寸: 1300x736
2025-03-16 04:16:02,506 - sampro.LabelVideo_TW - DEBUG - 创建彩色掩码完成
2025-03-16 04:16:02,508 - sampro.LabelVideo_TW - DEBUG - 叠加掩码到原始帧完成
2025-03-16 04:16:02,508 - sampro.LabelVideo_TW - DEBUG - 找到 1 个轮廓
2025-03-16 04:16:02,509 - sampro.LabelVideo_TW - DEBUG - 轮廓 1 面积: 314.5
2025-03-16 04:16:02,509 - sampro.LabelVideo_TW - DEBUG - 更新最大轮廓: 索引=1, 面积=314.5
2025-03-16 04:16:02,509 - sampro.LabelVideo_TW - DEBUG - 最大轮廓边界框: x=561, y=173, w=19, h=26
2025-03-16 04:16:02,510 - sampro.LabelVideo_TW - DEBUG - 绘制边界框和轮廓完成
2025-03-16 04:16:02,511 - sampro.LabelVideo_TW - DEBUG - 绘制掩码成功，边界框: x=561, y=173, w=19, h=26
2025-03-16 04:16:02,511 - sampro.LabelVideo_TW - DEBUG - 保存处理后的帧图像
2025-03-16 04:16:02,520 - sampro.LabelVideo_TW - DEBUG - 保存调整后的图像到: D:/workspace/LabelQuick/video\mask/0.jpg, 大小: 1300x736.0
2025-03-16 04:16:02,520 - sampro.LabelVideo_TW - DEBUG - 创建 XML 格式标签，文本: 篮球
2025-03-16 04:16:02,520 - sampro.LabelVideo_TW - DEBUG - XML 标签信息: 路径=D:/workspace/LabelQuick/video\0.xml, 大小=[1300, 736, 3]
2025-03-16 04:16:02,521 - sampro.LabelVideo_TW - DEBUG - 添加标签消息到列表，当前共 1 个消息
2025-03-16 04:16:02,521 - sampro.LabelVideo_TW - INFO - 帧处理完成，返回 1 个标签消息
2025-03-16 04:16:02,522 - root - DEBUG - 收到 1 个标签消息
2025-03-16 04:16:02,522 - root - INFO - 视频处理完成，发送完成信号
2025-03-16 04:16:02,522 - root - INFO - 视频处理完成
2025-03-16 04:16:02,522 - root - DEBUG - 收到 1 个标签消息
2025-03-16 04:16:02,523 - root - DEBUG - 输出目录中有 1 个图像文件
2025-03-16 04:16:02,523 - root - DEBUG - 处理图像文件: D:/workspace/LabelQuick/video\0.jpg
2025-03-16 04:16:02,523 - root - DEBUG - 找到 1 个匹配的标签消息
2025-03-16 04:16:02,523 - root - DEBUG - 保存 XML 标签到: D:/workspace/LabelQuick/video\0.xml, 大小: [1300, 736, 3]
2025-03-16 04:16:02,524 - root - INFO - 已保存 XML 标签: D:/workspace/LabelQuick/video\0.xml
2025-03-16 04:16:02,524 - root - INFO - 检测打标过程全部完成
2025-03-16 04:16:02,528 - root - INFO - 视频处理完成
2025-03-16 04:16:02,528 - root - DEBUG - 收到 1 个标签消息
2025-03-16 04:16:02,529 - root - DEBUG - 输出目录中有 1 个图像文件
2025-03-16 04:16:02,529 - root - DEBUG - 处理图像文件: D:/workspace/LabelQuick/video\0.jpg
2025-03-16 04:16:02,529 - root - DEBUG - 找到 1 个匹配的标签消息
2025-03-16 04:16:02,529 - root - DEBUG - 保存 XML 标签到: D:/workspace/LabelQuick/video\0.xml, 大小: [1300, 736, 3]
2025-03-16 04:16:02,530 - root - INFO - 已保存 XML 标签: D:/workspace/LabelQuick/video\0.xml
2025-03-16 04:16:02,530 - root - INFO - 检测打标过程全部完成
2025-03-16 04:16:26,733 - root - INFO - 标签格式已更改: xml -> yolo
2025-03-16 04:16:26,734 - root - DEBUG - 检查 YOLO 格式的类别映射
2025-03-16 04:16:26,734 - root - DEBUG - 当前类别映射: {'篮球': 0}
2025-03-16 04:16:26,734 - root - INFO - 类别映射已保存到: D:/workspace/LabelQuick/video\classes.txt
2025-03-16 04:16:26,734 - root - DEBUG - 尝试重新加载当前图像的标签: 0
2025-03-16 04:16:26,735 - root - INFO - 检查图像 0 的已存在标签
2025-03-16 04:16:26,735 - root - DEBUG - XML 文件存在: True, YOLO 文件存在: False, 当前格式: yolo
2025-03-16 04:16:26,735 - root - DEBUG - 加载 XML 标签文件: D:/workspace/LabelQuick/video/0.xml
2025-03-16 04:16:26,745 - root - DEBUG - 从 XML 加载了 1 个标签和 1 个边界框
2025-03-16 04:16:26,746 - root - DEBUG - 开始显示已存在的标签和边界框
2025-03-16 04:16:26,757 - root - DEBUG - 显示 0 个点击标签和 1 个绘制标签
2025-03-16 04:16:26,757 - root - DEBUG - 绘制手动标签 1: (561, 173) - (580, 199)
2025-03-16 04:16:26,759 - root - DEBUG - 标签显示完成
2025-03-16 04:16:26,760 - root - DEBUG - 添加标签到 UI: 篮球
2025-03-16 04:16:30,506 - root - INFO - 开始视频检测打标
2025-03-16 04:16:30,507 - root - DEBUG - 禁用开始检测打标按钮
2025-03-16 04:16:30,507 - root - DEBUG - 视频路径: D:/workspace/LabelQuick/video/ceshi.mp4, 输出目录: D:/workspace/LabelQuick/video
2025-03-16 04:16:30,507 - root - DEBUG - 设置 AVT 的点击坐标: (569, 177), 方法: 1
2025-03-16 04:16:30,507 - root - DEBUG - AVT 点击坐标设置成功
2025-03-16 04:16:30,507 - root - DEBUG - 添加点击点到模型
2025-03-16 04:16:30,507 - sampro.LabelVideo_TW - DEBUG - 添加新点: 坐标=(569, 177), 方法=1
2025-03-16 04:16:30,508 - sampro.LabelVideo_TW - DEBUG - 点集: [[564 175]
 [569 177]
 [569 177]
 [569 177]], 标签: [1 1 1 1]
2025-03-16 04:16:31,235 - sampro.LabelVideo_TW - DEBUG - 生成的掩码形状: torch.Size([1, 1, 736, 1300])
2025-03-16 04:16:31,235 - root - DEBUG - 点击点添加成功
2025-03-16 04:16:31,236 - root - DEBUG - 创建视频处理线程，点击坐标: (569, 177), 方法: 1, 文本: 篮球
2025-03-16 04:16:31,236 - root - DEBUG - 保存路径: D:/workspace/LabelQuick/video, 格式: yolo, 类别映射: {'篮球': 0}
2025-03-16 04:16:31,236 - root - INFO - 初始化视频处理线程
2025-03-16 04:16:31,237 - root - DEBUG - 视频处理线程初始化完成: 视频路径=D:/workspace/LabelQuick/video/ceshi.mp4, 输出目录=D:/workspace/LabelQuick/video, 格式=yolo
2025-03-16 04:16:31,237 - root - DEBUG - 连接视频处理线程信号
2025-03-16 04:16:31,237 - root - INFO - 启动视频处理线程
2025-03-16 04:16:31,237 - root - DEBUG - 禁用其他按钮，防止重复处理
2025-03-16 04:16:31,238 - root - INFO - 开始视频处理: 点击坐标=(569, 177), 方法=1
2025-03-16 04:16:31,239 - root - DEBUG - 创建输出目录: D:/workspace/LabelQuick/video 和 mask 子目录: D:/workspace/LabelQuick/video\mask
2025-03-16 04:16:31,240 - root - DEBUG - 确保YOLO目录结构存在: D:/workspace/LabelQuick/video\images\train, D:/workspace/LabelQuick/video\labels\train
2025-03-16 04:16:31,240 - root - DEBUG - 设置 AVT 的视频目录: D:/workspace/LabelQuick/video
2025-03-16 04:16:31,240 - sampro.LabelVideo_TW - DEBUG - 找到 1 个帧文件
2025-03-16 04:16:31,240 - sampro.LabelVideo_TW - DEBUG - 使用数字提取排序成功
2025-03-16 04:16:31,240 - sampro.LabelVideo_TW - DEBUG - 排序后的前5个文件: ['0.jpg']
2025-03-16 04:16:31,255 - root - INFO - 开始处理视频帧，总帧数: 1
2025-03-16 04:16:31,256 - root - DEBUG - 设置 AVT 的点击坐标: (569, 177), 方法: 1
2025-03-16 04:16:31,256 - root - INFO - 开始自动视频打标
2025-03-16 04:16:31,256 - sampro.LabelVideo_TW - INFO - 开始自动视频打标，格式: yolo, 文本: 篮球
2025-03-16 04:16:31,256 - sampro.LabelVideo_TW - INFO - 开始收集视频分割结果
2025-03-16 04:16:31,344 - sampro.LabelVideo_TW - DEBUG - 帧 0 的分割结果: 对象 IDs [1]
2025-03-16 04:16:31,345 - sampro.LabelVideo_TW - INFO - 收集到 1 个帧的分割结果
2025-03-16 04:16:31,345 - sampro.LabelVideo_TW - INFO - 开始处理所有帧并生成标签
2025-03-16 04:16:31,345 - sampro.LabelVideo_TW - INFO - 开始绘制轮廓，格式: yolo, 文本: 篮球
2025-03-16 04:16:31,345 - sampro.LabelVideo_TW - DEBUG - 起始帧: 0, 返回帧: False, 保存图像路径: D:/workspace/LabelQuick/video\mask, 保存标签路径: D:/workspace/LabelQuick/video
2025-03-16 04:16:31,345 - sampro.LabelVideo_TW - DEBUG - 开始在视频中传播分割结果
2025-03-16 04:16:31,347 - sampro.LabelVideo_TW - DEBUG - 帧 0 的掩码形状: torch.Size([1, 1, 736, 1300])
2025-03-16 04:16:31,348 - sampro.LabelVideo_TW - DEBUG - 帧 0, 对象 1 的掩码形状: (1, 736, 1300)
2025-03-16 04:16:31,348 - sampro.LabelVideo_TW - DEBUG - 帧 0 的分割结果: 对象 IDs [1]
2025-03-16 04:16:31,349 - sampro.LabelVideo_TW - DEBUG - 找到 1 个帧
2025-03-16 04:16:31,349 - sampro.LabelVideo_TW - INFO - 开始处理 1 个帧
2025-03-16 04:16:31,349 - sampro.LabelVideo_TW - DEBUG - 处理帧 0: D:/workspace/LabelQuick/video\0.jpg
2025-03-16 04:16:31,364 - sampro.LabelVideo_TW - DEBUG - 帧 0 尺寸: 1300x736
2025-03-16 04:16:31,364 - sampro.LabelVideo_TW - DEBUG - 帧 0 有 1 个分割对象
2025-03-16 04:16:31,364 - sampro.LabelVideo_TW - DEBUG - 处理帧 0 的对象 1
2025-03-16 04:16:31,364 - sampro.LabelVideo_TW - DEBUG - 原始掩码尺寸: (1, 736, 1300)
2025-03-16 04:16:31,364 - sampro.LabelVideo_TW - DEBUG - 转换掩码类型从 bool 到 uint8
2025-03-16 04:16:31,366 - sampro.LabelVideo_TW - WARNING - 掩码尺寸 (736x1) 与帧尺寸 (1300x736) 不匹配，进行调整
2025-03-16 04:16:31,366 - sampro.LabelVideo_TW - DEBUG - 调整后的掩码尺寸: (736, 1300)
2025-03-16 04:16:31,367 - sampro.LabelVideo_TW - INFO - 绘制掩码，对象 ID: 1
2025-03-16 04:16:31,367 - sampro.LabelVideo_TW - DEBUG - 帧尺寸: 1300x736
2025-03-16 04:16:31,367 - sampro.LabelVideo_TW - DEBUG - 原始掩码尺寸: 1300x736
2025-03-16 04:16:31,373 - sampro.LabelVideo_TW - DEBUG - 创建彩色掩码完成
2025-03-16 04:16:31,374 - sampro.LabelVideo_TW - DEBUG - 叠加掩码到原始帧完成
2025-03-16 04:16:31,375 - sampro.LabelVideo_TW - DEBUG - 找到 1 个轮廓
2025-03-16 04:16:31,376 - sampro.LabelVideo_TW - DEBUG - 轮廓 1 面积: 314.5
2025-03-16 04:16:31,376 - sampro.LabelVideo_TW - DEBUG - 更新最大轮廓: 索引=1, 面积=314.5
2025-03-16 04:16:31,376 - sampro.LabelVideo_TW - DEBUG - 最大轮廓边界框: x=561, y=173, w=19, h=26
2025-03-16 04:16:31,377 - sampro.LabelVideo_TW - DEBUG - 绘制边界框和轮廓完成
2025-03-16 04:16:31,378 - sampro.LabelVideo_TW - DEBUG - 绘制掩码成功，边界框: x=561, y=173, w=19, h=26
2025-03-16 04:16:31,378 - sampro.LabelVideo_TW - DEBUG - 保存处理后的帧图像
2025-03-16 04:16:31,386 - sampro.LabelVideo_TW - DEBUG - 保存调整后的图像到: D:/workspace/LabelQuick/video\mask/0.jpg, 大小: 1300x736.0
2025-03-16 04:16:31,386 - sampro.LabelVideo_TW - DEBUG - 创建 YOLO 格式标签，文本: 篮球
2025-03-16 04:16:31,386 - util.yolofile - DEBUG - 创建 YOLO 标签信息: 图像=0, 尺寸=1300x736, 文本=篮球
2025-03-16 04:16:31,386 - util.yolofile - DEBUG - 边界框: x=561, y=173, w=19, h=26
2025-03-16 04:16:31,387 - util.yolofile - DEBUG - YOLO 标签文件路径: D:/workspace/LabelQuick/video\0.txt
2025-03-16 04:16:31,387 - util.yolofile - DEBUG - YOLO 标签信息已创建: 路径=D:/workspace/LabelQuick/video\0.txt, 大小=[1300, 736, 3], 边界框=[561, 173, 580, 199]
2025-03-16 04:16:31,387 - sampro.LabelVideo_TW - DEBUG - YOLO 标签信息: 路径=D:/workspace/LabelQuick/video\0.txt, 大小=[1300, 736, 3]
2025-03-16 04:16:31,387 - sampro.LabelVideo_TW - DEBUG - 添加标签消息到列表，当前共 1 个消息
2025-03-16 04:16:31,387 - sampro.LabelVideo_TW - INFO - 帧处理完成，返回 1 个标签消息
2025-03-16 04:16:31,388 - root - DEBUG - 收到 1 个标签消息
2025-03-16 04:16:31,389 - root - INFO - 保存所有 YOLO 格式标签，共 1 个帧
2025-03-16 04:16:31,389 - root - INFO - 类别映射已保存到: D:/workspace/LabelQuick/video\labels\classes.txt
2025-03-16 04:16:31,390 - root - DEBUG - 为帧 0 保存 YOLO 标签到 D:/workspace/LabelQuick/video\labels\train\0.txt
2025-03-16 04:16:31,390 - root - DEBUG - 从 size 获取图像尺寸: 1300x736
2025-03-16 04:16:31,390 - util.yolofile - DEBUG - 转换坐标到 YOLO 格式: 图像尺寸=(1300, 736), 边界框=(561, 173, 580, 199)
2025-03-16 04:16:31,390 - util.yolofile - DEBUG - YOLO 格式坐标: 中心点=(0.438846, 0.252717), 尺寸=(0.014615, 0.035326)
2025-03-16 04:16:31,390 - root - DEBUG - 写入行: 0 0.438846 0.252717 0.014615 0.035326
2025-03-16 04:16:31,390 - root - INFO - YOLO 标签已保存到: D:/workspace/LabelQuick/video\labels\train\0.txt
2025-03-16 04:16:31,391 - root - INFO - 视频处理完成，发送完成信号
2025-03-16 04:16:31,391 - root - INFO - 视频处理完成
2025-03-16 04:16:31,392 - root - DEBUG - 收到 1 个标签消息
2025-03-16 04:16:31,394 - root - INFO - 检测打标过程全部完成
2025-03-16 04:16:31,395 - root - INFO - 视频处理完成
2025-03-16 04:16:31,395 - root - DEBUG - 收到 1 个标签消息
2025-03-16 04:16:31,396 - root - INFO - 检测打标过程全部完成
