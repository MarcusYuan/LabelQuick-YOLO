# LabelQuick

LabelQuick是一个基于SAM2（Segment Anything Model 2）的高效图像和视频标注工具，专为目标检测和实例分割任务设计。它利用先进的AI模型辅助标注过程，大幅提高标注效率。

## 主要特性

- **智能标注**：基于SAM2模型的点击式标注，只需点击目标即可生成精确掩码
- **多格式支持**：支持XML和YOLO格式的标签输出
- **图像标注**：支持单张图像的快速标注
- **视频标注**：支持视频帧提取和自动目标跟踪标注
- **批量处理**：支持批量图像处理和标注
- **用户友好界面**：简洁直观的图形界面，操作简单

## 安装指南

### 系统要求

- Python 3.8+
- CUDA支持的GPU（推荐用于SAM2模型加速）
- 至少8GB内存

### 安装步骤

1. 克隆仓库：
```bash
git clone https://github.com/yourusername/LabelQuick.git
cd LabelQuick
```

2. 安装依赖：
```bash
pip install -r requirements.txt
```

3. 下载SAM2模型权重：
```bash
# 模型权重将自动下载到正确位置
```

4. 启动应用：
```bash
python GUI/main.py
```

## 使用指南

### 图像标注

1. 点击"打开目录"选择包含图像的文件夹
2. 使用左侧工具栏选择标注模式（点击或矩形框）
3. 在图像上点击目标对象
4. 系统自动生成掩码和边界框
5. 按"S"键输入标签名称
6. 点击"保存"按钮保存标注结果

### 视频标注

1. 点击"打开视频"选择视频文件
2. 设置输出目录
3. 系统自动提取视频第一帧
4. 在第一帧上点击目标对象
5. 按"S"键输入标签名称
6. 点击"目标跟踪标注"按钮
7. 系统自动处理所有视频帧并生成标注

## 新增功能

### 视频目标跟踪标注

最新版本增加了基于SAM2模型的视频目标跟踪标注功能，可以自动跟踪视频中的目标对象并生成标注：

1. **智能帧提取**：根据指定的fps参数从视频中提取关键帧
2. **目标跟踪**：基于第一帧的标注，自动跟踪后续帧中的目标对象
3. **批量标注生成**：自动为所有帧生成一致的标注数据
4. **YOLO格式支持**：生成符合YOLO训练要求的目录结构和标注文件
5. **标注可视化**：在处理过程中显示标注结果，方便用户验证

### YOLO训练数据生成

新增了自动生成YOLO训练数据集的功能：

1. **标准目录结构**：自动创建`images/train`和`labels/train`目录
2. **类别映射**：在`labels`目录下生成`classes.txt`文件，包含所有类别名称
3. **标准格式标签**：生成符合YOLO格式的标签文件（`类别索引 x_center y_center width height`）
4. **数据集完整性**：确保每个图像都有对应的标签文件

## 快捷键

- **S**：保存当前标注并输入标签名称
- **左/右箭头**：在图像目录中导航
- **Esc**：取消当前操作

## 标注流程

### 单张图像标注流程

1. 打开图像
2. 点击目标对象
3. 系统生成掩码和边界框
4. 按S键输入标签名称
5. 保存标注

### 视频标注流程

1. 打开视频
2. 在第一帧上点击目标对象
3. 按S键输入标签名称
4. 点击"目标跟踪标注"按钮
5. 系统自动处理所有帧并生成标注
6. 标注结果保存在指定目录的`images/train`和`labels/train`中

## 常见问题

**Q: 为什么某些视频帧的目标跟踪效果不理想？**  
A: SAM2模型的跟踪能力受到目标移动速度、视频质量等因素影响。对于跟踪失败的情况，系统会使用第一帧的标注为所有帧创建一致的标签。

**Q: 如何调整提取的视频帧数量？**  
A: 可以修改代码中的fps参数（默认为5）。较低的fps值会提取更少的帧，较高的值会提取更多的帧。

**Q: 支持哪些视频格式？**  
A: 支持大多数常见视频格式，包括MP4、AVI、MOV等。

## 贡献指南

欢迎贡献代码、报告问题或提出新功能建议。请遵循以下步骤：

1. Fork仓库
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 许可证

本项目采用MIT许可证。详情请参阅LICENSE文件。
